import { type TransactionEntity, type RuleActionEntity, type RuleEntity } from '../../types/models';
import * as db from '../db';
import { Action, Rule } from '../rules';
export { iterateIds } from '../rules';
export declare function resetState(): void;
export declare function parseConditionsOrActions(str: any): any[];
export declare function serializeConditionsOrActions(arr: any): string;
export declare const ruleModel: {
    validate(rule: any, { update }?: {
        update?: boolean;
    }): any;
    toJS(row: any): any;
    fromJS(rule: any): any;
};
export declare function makeRule(data: any): any;
export declare function loadRules(): Promise<void>;
export declare function getRules(): any[];
export declare function insertRule(rule: Omit<RuleEntity, 'id'> & {
    id?: string;
}): Promise<any>;
export declare function updateRule(rule: any): Promise<void>;
export declare function deleteRule(id: string): Promise<boolean>;
export declare function getRuleIdFromScheduleId(scheduleId: string): Promise<string | null>;
export declare function getAllRuleIdsFromSchedules(excluding: string): Promise<string[]>;
export declare function runRules(trans: any, accounts?: Map<string, db.DbAccount> | null): Promise<TransactionEntity>;
export declare function conditionsToAQL(conditions: any, { recurDateBounds, applySpecialCases }?: {
    recurDateBounds?: number;
    applySpecialCases?: boolean;
}): {
    filters: any;
    errors: any[];
};
export declare function applyActions(transactions: TransactionEntity[], actions: Array<Action | RuleActionEntity>): Promise<{
    added: TransactionEntity[];
    updated: TransactionEntity[] | ({
        id: any;
        transfer_id: any;
    } | {
        id: any;
        category: any;
    })[];
    deleted: TransactionEntity[];
    errors: string[];
}>;
export declare function getRulesForPayee(payeeId: any): Rule[];
export declare function updatePayeeRenameRule(fromNames: string[], to: string): Promise<any>;
export declare function getProbableCategory(transactions: any): any;
export declare function updateCategoryRules(transactions: any): Promise<void>;
export type TransactionForRules = TransactionEntity & {
    payee_name?: string;
    _account?: db.DbAccount;
    balance?: number;
    _category_name?: string;
    _account_name?: string;
};
export declare function prepareTransactionForRules(trans: TransactionEntity, accounts?: Map<string, db.DbAccount> | null): Promise<TransactionForRules>;
export declare function finalizeTransactionForRules(trans: TransactionEntity | TransactionForRules): Promise<TransactionEntity>;
